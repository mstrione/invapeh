{"version":3,"sources":["../es6/Subject.js"],"names":[],"mappings":"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","file":"Subject.js","sourcesContent":["import Observable from './Observable';\nimport Subscriber from './Subscriber';\nimport Subscription from './Subscription';\nimport SubjectSubscription from './subjects/SubjectSubscription';\nconst subscriptionAdd = Subscription.prototype.add;\nconst subscriptionRemove = Subscription.prototype.remove;\nconst subscriptionUnsubscribe = Subscription.prototype.unsubscribe;\nconst subscriberNext = Subscriber.prototype.next;\nconst subscriberError = Subscriber.prototype.error;\nconst subscriberComplete = Subscriber.prototype.complete;\nconst _subscriberNext = Subscriber.prototype._next;\nconst _subscriberError = Subscriber.prototype._error;\nconst _subscriberComplete = Subscriber.prototype._complete;\nexport default class Subject extends Observable {\n    constructor(...args) {\n        super(...args);\n        this.observers = [];\n        this.isUnsubscribed = false;\n        this.dispatching = false;\n        this.errorSignal = false;\n        this.completeSignal = false;\n    }\n    static create(source, destination) {\n        return new BidirectionalSubject(source, destination);\n    }\n    lift(operator) {\n        const subject = new BidirectionalSubject(this, this.destination || this);\n        subject.operator = operator;\n        return subject;\n    }\n    _subscribe(subscriber) {\n        if (subscriber.isUnsubscribed) {\n            return;\n        }\n        else if (this.errorSignal) {\n            subscriber.error(this.errorInstance);\n            return;\n        }\n        else if (this.completeSignal) {\n            subscriber.complete();\n            return;\n        }\n        else if (this.isUnsubscribed) {\n            throw new Error(\"Cannot subscribe to a disposed Subject.\");\n        }\n        this.observers.push(subscriber);\n        return new SubjectSubscription(this, subscriber);\n    }\n    add(subscription) {\n        subscriptionAdd.call(this, subscription);\n    }\n    remove(subscription) {\n        subscriptionRemove.call(this, subscription);\n    }\n    unsubscribe() {\n        this.observers = void 0;\n        subscriptionUnsubscribe.call(this);\n    }\n    next(value) {\n        if (this.isUnsubscribed) {\n            return;\n        }\n        this.dispatching = true;\n        this._next(value);\n        this.dispatching = false;\n        if (this.errorSignal) {\n            this.error(this.errorInstance);\n        }\n        else if (this.completeSignal) {\n            this.complete();\n        }\n    }\n    error(error) {\n        if (this.isUnsubscribed || this.completeSignal) {\n            return;\n        }\n        this.errorSignal = true;\n        this.errorInstance = error;\n        if (this.dispatching) {\n            return;\n        }\n        this._error(error);\n        this.unsubscribe();\n    }\n    complete() {\n        if (this.isUnsubscribed || this.errorSignal) {\n            return;\n        }\n        this.completeSignal = true;\n        if (this.dispatching) {\n            return;\n        }\n        this._complete();\n        this.unsubscribe();\n    }\n    _next(value) {\n        let index = -1;\n        const observers = this.observers.slice(0);\n        const len = observers.length;\n        while (++index < len) {\n            observers[index].next(value);\n        }\n    }\n    _error(error) {\n        let index = -1;\n        const observers = this.observers;\n        const len = observers.length;\n        // optimization -- block next, complete, and unsubscribe while dispatching\n        this.observers = void 0;\n        this.isUnsubscribed = true;\n        while (++index < len) {\n            observers[index].error(error);\n        }\n        this.isUnsubscribed = false;\n    }\n    _complete() {\n        let index = -1;\n        const observers = this.observers;\n        const len = observers.length;\n        // optimization -- block next, complete, and unsubscribe while dispatching\n        this.observers = void 0; // optimization\n        this.isUnsubscribed = true;\n        while (++index < len) {\n            observers[index].complete();\n        }\n        this.isUnsubscribed = false;\n    }\n}\nclass BidirectionalSubject extends Subject {\n    constructor(source, destination) {\n        super();\n        this.source = source;\n        this.destination = destination;\n    }\n    _subscribe(subscriber) {\n        const operator = this.operator;\n        return this.source._subscribe.call(this.source, operator ? operator.call(subscriber) : subscriber);\n    }\n    next(x) {\n        subscriberNext.call(this, x);\n    }\n    error(e) {\n        subscriberError.call(this, e);\n    }\n    complete() {\n        subscriberComplete.call(this);\n    }\n    _next(x) {\n        _subscriberNext.call(this, x);\n    }\n    _error(e) {\n        _subscriberError.call(this, e);\n    }\n    _complete() {\n        _subscriberComplete.call(this);\n    }\n}\n//# sourceMappingURL=Subject.js.map"]}