{"version":3,"sources":["../../es6/operators/timeout.js"],"names":[],"mappings":"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","file":"timeout.js","sourcesContent":["import Subscriber from '../Subscriber';\nimport immediate from '../schedulers/immediate';\nimport isDate from '../util/isDate';\nexport default function timeout(due, errorToSend = null, scheduler = immediate) {\n    let absoluteTimeout = isDate(due);\n    let waitFor = absoluteTimeout ? (+due - scheduler.now()) : due;\n    return this.lift(new TimeoutOperator(waitFor, absoluteTimeout, errorToSend, scheduler));\n}\nclass TimeoutOperator {\n    constructor(waitFor, absoluteTimeout, errorToSend, scheduler) {\n        this.waitFor = waitFor;\n        this.absoluteTimeout = absoluteTimeout;\n        this.errorToSend = errorToSend;\n        this.scheduler = scheduler;\n    }\n    call(subscriber) {\n        return new TimeoutSubscriber(subscriber, this.absoluteTimeout, this.waitFor, this.errorToSend, this.scheduler);\n    }\n}\nclass TimeoutSubscriber extends Subscriber {\n    constructor(destination, absoluteTimeout, waitFor, errorToSend, scheduler) {\n        super(destination);\n        this.absoluteTimeout = absoluteTimeout;\n        this.waitFor = waitFor;\n        this.errorToSend = errorToSend;\n        this.scheduler = scheduler;\n        this.index = 0;\n        this._previousIndex = 0;\n        this._hasCompleted = false;\n        this.scheduleTimeout();\n    }\n    get previousIndex() {\n        return this._previousIndex;\n    }\n    get hasCompleted() {\n        return this._hasCompleted;\n    }\n    static dispatchTimeout(state) {\n        const source = state.subscriber;\n        const currentIndex = state.index;\n        if (!source.hasCompleted && source.previousIndex === currentIndex) {\n            source.notifyTimeout();\n        }\n    }\n    scheduleTimeout() {\n        let currentIndex = this.index;\n        this.scheduler.schedule(TimeoutSubscriber.dispatchTimeout, this.waitFor, { subscriber: this, index: currentIndex });\n        this.index++;\n        this._previousIndex = currentIndex;\n    }\n    _next(value) {\n        this.destination.next(value);\n        if (!this.absoluteTimeout) {\n            this.scheduleTimeout();\n        }\n    }\n    _error(err) {\n        this.destination.error(err);\n        this._hasCompleted = true;\n    }\n    _complete() {\n        this.destination.complete();\n        this._hasCompleted = true;\n    }\n    notifyTimeout() {\n        this.error(this.errorToSend || new Error('timeout'));\n    }\n}\n//# sourceMappingURL=timeout.js.map"]}