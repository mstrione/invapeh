{"version":3,"sources":["../../es6/operators/windowWhen.js"],"names":[],"mappings":"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","file":"windowWhen.js","sourcesContent":["import Subscriber from '../Subscriber';\nimport Subject from '../Subject';\nimport Subscription from '../Subscription';\nimport tryCatch from '../util/tryCatch';\nimport { errorObject } from '../util/errorObject';\nexport default function window(closingSelector) {\n    return this.lift(new WindowOperator(closingSelector));\n}\nclass WindowOperator {\n    constructor(closingSelector) {\n        this.closingSelector = closingSelector;\n    }\n    call(subscriber) {\n        return new WindowSubscriber(subscriber, this.closingSelector);\n    }\n}\nclass WindowSubscriber extends Subscriber {\n    constructor(destination, closingSelector) {\n        super(destination);\n        this.closingSelector = closingSelector;\n        this.window = new Subject();\n        this.openWindow();\n    }\n    _next(value) {\n        this.window.next(value);\n    }\n    _error(err) {\n        this.window.error(err);\n        this.destination.error(err);\n    }\n    _complete() {\n        this.window.complete();\n        this.destination.complete();\n    }\n    openWindow() {\n        const prevClosingNotification = this.closingNotification;\n        if (prevClosingNotification) {\n            this.remove(prevClosingNotification);\n            prevClosingNotification.unsubscribe();\n        }\n        const prevWindow = this.window;\n        if (prevWindow) {\n            prevWindow.complete();\n        }\n        this.destination.next(this.window = new Subject());\n        let closingNotifier = tryCatch(this.closingSelector)();\n        if (closingNotifier === errorObject) {\n            const err = closingNotifier.e;\n            this.destination.error(err);\n            this.window.error(err);\n        }\n        else {\n            let closingNotification = this.closingNotification = new Subscription();\n            this.add(closingNotification.add(closingNotifier._subscribe(new WindowClosingNotifierSubscriber(this))));\n        }\n    }\n}\nclass WindowClosingNotifierSubscriber extends Subscriber {\n    constructor(parent) {\n        super(null);\n        this.parent = parent;\n    }\n    _next() {\n        this.parent.openWindow();\n    }\n    _error(err) {\n        this.parent.error(err);\n    }\n    _complete() {\n        // noop\n    }\n}\n//# sourceMappingURL=windowWhen.js.map"]}