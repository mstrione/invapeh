{"version":3,"sources":["../../es6/operators/last.js"],"names":[],"mappings":"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","file":"last.js","sourcesContent":["import Subscriber from '../Subscriber';\nimport tryCatch from '../util/tryCatch';\nimport { errorObject } from '../util/errorObject';\nimport EmptyError from '../util/EmptyError';\nexport default function last(predicate, resultSelector, defaultValue) {\n    return this.lift(new LastOperator(predicate, resultSelector, defaultValue, this));\n}\nclass LastOperator {\n    constructor(predicate, resultSelector, defaultValue, source) {\n        this.predicate = predicate;\n        this.resultSelector = resultSelector;\n        this.defaultValue = defaultValue;\n        this.source = source;\n    }\n    call(observer) {\n        return new LastSubscriber(observer, this.predicate, this.resultSelector, this.defaultValue, this.source);\n    }\n}\nclass LastSubscriber extends Subscriber {\n    constructor(destination, predicate, resultSelector, defaultValue, source) {\n        super(destination);\n        this.predicate = predicate;\n        this.resultSelector = resultSelector;\n        this.defaultValue = defaultValue;\n        this.source = source;\n        this.hasValue = false;\n        this.index = 0;\n        if (typeof defaultValue !== 'undefined') {\n            this.lastValue = defaultValue;\n            this.hasValue = true;\n        }\n    }\n    _next(value) {\n        const { predicate, resultSelector, destination } = this;\n        const index = this.index++;\n        if (predicate) {\n            let found = tryCatch(predicate)(value, index, this.source);\n            if (found === errorObject) {\n                destination.error(errorObject.e);\n                return;\n            }\n            if (found) {\n                if (resultSelector) {\n                    let result = tryCatch(resultSelector)(value, index);\n                    if (result === errorObject) {\n                        destination.error(errorObject.e);\n                        return;\n                    }\n                    this.lastValue = result;\n                }\n                else {\n                    this.lastValue = value;\n                }\n                this.hasValue = true;\n            }\n        }\n        else {\n            this.lastValue = value;\n            this.hasValue = true;\n        }\n    }\n    _complete() {\n        const destination = this.destination;\n        if (this.hasValue) {\n            destination.next(this.lastValue);\n            destination.complete();\n        }\n        else {\n            destination.error(new EmptyError);\n        }\n    }\n}\n//# sourceMappingURL=last.js.map"]}