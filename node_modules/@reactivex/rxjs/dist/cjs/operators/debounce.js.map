{"version":3,"sources":["../../es6/operators/debounce.js"],"names":[],"mappings":"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","file":"debounce.js","sourcesContent":["import PromiseObservable from '../observables/PromiseObservable';\nimport Subscriber from '../Subscriber';\nimport tryCatch from '../util/tryCatch';\nimport { errorObject } from '../util/errorObject';\nexport default function debounce(durationSelector) {\n    return this.lift(new DebounceOperator(durationSelector));\n}\nclass DebounceOperator {\n    constructor(durationSelector) {\n        this.durationSelector = durationSelector;\n    }\n    call(observer) {\n        return new DebounceSubscriber(observer, this.durationSelector);\n    }\n}\nclass DebounceSubscriber extends Subscriber {\n    constructor(destination, durationSelector) {\n        super(destination);\n        this.durationSelector = durationSelector;\n        this.debouncedSubscription = null;\n        this.lastValue = null;\n        this._index = 0;\n    }\n    get index() {\n        return this._index;\n    }\n    _next(value) {\n        const destination = this.destination;\n        const currentIndex = ++this._index;\n        let debounce = tryCatch(this.durationSelector)(value);\n        if (debounce === errorObject) {\n            destination.error(errorObject.e);\n        }\n        else {\n            if (typeof debounce.subscribe !== 'function'\n                && typeof debounce.then === 'function') {\n                debounce = PromiseObservable.create(debounce);\n            }\n            this.lastValue = value;\n            this.add(this.debouncedSubscription = debounce._subscribe(new DurationSelectorSubscriber(this, currentIndex)));\n        }\n    }\n    _complete() {\n        this.debouncedNext();\n        this.destination.complete();\n    }\n    debouncedNext() {\n        this.clearDebounce();\n        if (this.lastValue != null) {\n            this.destination.next(this.lastValue);\n            this.lastValue = null;\n        }\n    }\n    clearDebounce() {\n        const debouncedSubscription = this.debouncedSubscription;\n        if (debouncedSubscription !== null) {\n            this.remove(debouncedSubscription);\n            this.debouncedSubscription = null;\n        }\n    }\n}\nclass DurationSelectorSubscriber extends Subscriber {\n    constructor(parent, currentIndex) {\n        super(null);\n        this.parent = parent;\n        this.currentIndex = currentIndex;\n    }\n    debounceNext() {\n        const parent = this.parent;\n        if (this.currentIndex === parent.index) {\n            parent.debouncedNext();\n            if (!this.isUnsubscribed) {\n                this.unsubscribe();\n            }\n        }\n    }\n    _next(unused) {\n        this.debounceNext();\n    }\n    _error(err) {\n        this.parent.error(err);\n    }\n    _complete() {\n        this.debounceNext();\n    }\n}\n//# sourceMappingURL=debounce.js.map"]}