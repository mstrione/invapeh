{"version":3,"sources":["../../es6/operators/mergeMapTo-support.js"],"names":[],"mappings":"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","file":"mergeMapTo-support.js","sourcesContent":["import tryCatch from '../util/tryCatch';\nimport { errorObject } from '../util/errorObject';\nimport OuterSubscriber from '../OuterSubscriber';\nimport subscribeToResult from '../util/subscribeToResult';\nexport class MergeMapToOperator {\n    constructor(ish, resultSelector, concurrent = Number.POSITIVE_INFINITY) {\n        this.ish = ish;\n        this.resultSelector = resultSelector;\n        this.concurrent = concurrent;\n    }\n    call(observer) {\n        return new MergeMapToSubscriber(observer, this.ish, this.resultSelector, this.concurrent);\n    }\n}\nexport class MergeMapToSubscriber extends OuterSubscriber {\n    constructor(destination, ish, resultSelector, concurrent = Number.POSITIVE_INFINITY) {\n        super(destination);\n        this.ish = ish;\n        this.resultSelector = resultSelector;\n        this.concurrent = concurrent;\n        this.hasCompleted = false;\n        this.buffer = [];\n        this.active = 0;\n        this.index = 0;\n    }\n    _next(value) {\n        if (this.active < this.concurrent) {\n            const resultSelector = this.resultSelector;\n            const index = this.index++;\n            const ish = this.ish;\n            const destination = this.destination;\n            if (ish === errorObject) {\n                destination.error(ish.e);\n            }\n            else {\n                this.active++;\n                this._innerSub(ish, destination, resultSelector, value, index);\n            }\n        }\n        else {\n            this.buffer.push(value);\n        }\n    }\n    _innerSub(ish, destination, resultSelector, value, index) {\n        this.add(subscribeToResult(this, ish, value, index));\n    }\n    _complete() {\n        this.hasCompleted = true;\n        if (this.active === 0 && this.buffer.length === 0) {\n            this.destination.complete();\n        }\n    }\n    notifyNext(outerValue, innerValue, outerIndex, innerIndex) {\n        const { resultSelector, destination } = this;\n        if (resultSelector) {\n            const result = tryCatch(resultSelector)(outerValue, innerValue, outerIndex, innerIndex);\n            if (result === errorObject) {\n                destination.error(errorObject.e);\n            }\n            else {\n                destination.next(result);\n            }\n        }\n        else {\n            destination.next(innerValue);\n        }\n    }\n    notifyError(err) {\n        this.destination.error(err);\n    }\n    notifyComplete(innerSub) {\n        const buffer = this.buffer;\n        this.remove(innerSub);\n        this.active--;\n        if (buffer.length > 0) {\n            this._next(buffer.shift());\n        }\n        else if (this.active === 0 && this.hasCompleted) {\n            this.destination.complete();\n        }\n    }\n}\n//# sourceMappingURL=mergeMapTo-support.js.map"]}